<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stacker Game</title>
<style>
body {
    background-color: white;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    flex-direction: column;
}

#gameContainer {
    width: 80vw;
    height: 60vh;
    border: 2px solid black;
    position: relative;
    overflow: hidden;
}

.slider {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 20px;
    background-color: #3498db;
    animation: slide 2s linear infinite;
}

@keyframes slide {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

#controls {
    margin-top: 20px;
}

button {
    margin: 0 10px;
    padding: 10px 20px;
    font-size: 16px;
}

#score {
    margin-top: 20px;
    font-size: 20px;
}
</style>
</head>
<body>

<div id="gameContainer">
    <div id="slider1" class="slider"></div>
</div>
<div id="controls">
    <button id="startBtn">Start</button>
    <button id="restartBtn" style="display: none;">Restart</button>
</div>
<div id="score">Score: 0</div>

<script>
document.addEventListener('DOMContentLoaded', (event) => {
    let gameContainer = document.getElementById('gameContainer');
    let startBtn = document.getElementById('startBtn');
    let restartBtn = document.getElementById('restartBtn');
    let scoreDisplay = document.getElementById('score');
    let currentSlider, score = 0, gameActive = false;

    function startGame() {
        gameActive = true;
        startBtn.style.display = 'none';
        restartBtn.style.display = 'none';
        score = 0;
        updateScore();
        createSlider();
    }

    function createSlider() {
        if (!gameActive) return;
        let newSlider = document.createElement('div');
        newSlider.className = 'slider';
        if (currentSlider) {
            newSlider.style.top = (currentSlider.offsetTop - 20) + 'px';
            newSlider.style.width = currentSlider.style.width;
        }
        gameContainer.appendChild(newSlider);
        currentSlider = newSlider;
        currentSlider.addEventListener('animationiteration', () => {
            if (gameActive) {
                currentSlider.style.animationPlayState = 'running';
            }
        });
    }

    function stopSlider() {
        if (!gameActive) return;
        currentSlider.style.animationPlayState = 'paused';
        let prevSlider = currentSlider.previousElementSibling;
        if (prevSlider) {
            let overlap = calculateOverlap(currentSlider, prevSlider);
            if (overlap === 0) {
                gameOver();
                return;
            }
            currentSlider.style.width = overlap + 'px';
            currentSlider.style.left = prevSlider.offsetLeft + 'px';
        }
        score++;
        updateScore();
        createSlider();
    }

    function calculateOverlap(slider, base) {
        let baseLeft = base.offsetLeft;
        let baseRight = baseLeft + base.offsetWidth;
        let sliderLeft = slider.offsetLeft;
        let sliderRight = sliderLeft + slider.offsetWidth;
        let overlap = Math.min(baseRight, sliderRight) - Math.max(baseLeft, sliderLeft);
        return Math.max(0, overlap);
    }

    function gameOver() {
        gameActive = false;
        alert('Game Over! Your score is: ' + score);
        restartBtn.style.display = 'inline';
    }

    function updateScore() {
        scoreDisplay.textContent = 'Score: ' + score;
    }

    startBtn.onclick = startGame;
    restartBtn.onclick = startGame;
    document.addEventListener('keydown', (e) => {
        if (e.key === ' ' && gameActive) stopSlider();
    });
    document.addEventListener('click', (e) => {
        if (e.target.id !== 'startBtn' && e.target.id !== 'restartBtn' && gameActive) stopSlider();
    });
});
</script>
</body>
</html>